webpackJsonp([8],{"0SQO":function(t,e,r){"use strict";e.a={methods:{refresh:function(){this.listParams.currentPage=1,this.getTableList()},handleSizeChange:function(t){this.listParams.pageSize=t,this.getTableList()},handleCurrentChange:function(t){this.listParams.currentPage=t,this.getTableList()}}}},"11WH":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)},staticRenderFns:[]},n=r("VU/8")({name:"calllog"},a,!1,null,null,null);e.default=n.exports},Dl6f:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"c",function(){return o}),r.d(e,"b",function(){return l});var a=r("6Hqf"),n="api-marketing/",i=function(t){return Object(a.b)(n+"call-log",t)},o=function(t){return Object(a.b)(n+"save-call-setting",t)},l=function(t){return Object(a.b)(n+"get-call-setting",t)}},"H+9m":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("fZjL"),n=r.n(a),i=r("Dl6f"),o={name:"record",data:function(){return{openFlag:!1,storageType:0,loading:!1,allUnitFee:{storageThreeFee:0,storageSixFee:0,storageTwelveFee:0}}},methods:{submit:function(){var t=this;this.loading=!0;var e=this.openFlag,r=this.storageType;Object(i.c)({openFlag:Number(e),storageType:r}).then(function(e){t.loading=!1,t.$tips({type:"success",message:e.result})})}},created:function(){var t=this;this.$store.commit("aside_handler",!1),this.$store.commit("mutations_breadcrumb",[{name:"会员管理",path:""},{name:"通话记录",path:"/calllog/index"},{name:"录音存储设置",path:""}]),Object(i.b)().then(function(e){var r=e.result,a=r.callSetting,i=r.unitFee;a&&(t.openFlag=!!a.openFlag,t.storageType=a.storageType),n()(i).map(function(e){t.allUnitFee[e]=Number(i[e]).toFixed(2)||"0.00"})})}},l={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"dm-wrap",attrs:{"element-loading-text":"数据保存中"}},[r("el-alert",{attrs:{type:"info",closable:!1,"show-icon":""}},[r("p",{staticClass:"fz14 info-color line-height1_5",attrs:{slot:"title"},slot:"title"},[t._v("使用通话录音存储功能需开启通话录音存储服务，未开启则录音不作额外保存。开启后，仅支持保存从开启当天起的录音数据。选择不同保存时长收费标准不同，当前收费标准如下：1、三个月 "+t._s(t.allUnitFee.storageThreeFee)+"元/分钟 2、六个月 "+t._s(t.allUnitFee.storageSixFee)+"元/分钟 3、十二个月 "+t._s(t.allUnitFee.storageTwelveFee)+"元/分钟")])]),t._v(" "),r("section",{staticClass:"mt20"},[r("div",{staticClass:"mb20"},[r("span",{staticClass:"dm-input_label mr10"},[t._v("开启录音服务")]),t._v(" "),r("el-switch",{model:{value:t.openFlag,callback:function(e){t.openFlag=e},expression:"openFlag"}})],1),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.openFlag,expression:"openFlag"}]},[r("span",{staticClass:"dm-input_label mr10"},[t._v("录音保存时长")]),t._v(" "),r("el-radio-group",{model:{value:t.storageType,callback:function(e){t.storageType=e},expression:"storageType"}},[r("el-radio",{attrs:{label:0}},[t._v("三个月")]),t._v(" "),r("el-radio",{attrs:{label:1}},[t._v("六个月")]),t._v(" "),r("el-radio",{attrs:{label:2}},[t._v("十二个月")])],1)],1),t._v(" "),r("div",{staticClass:"mt30"},[r("el-button",{staticClass:"save",attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")])],1)])],1)},staticRenderFns:[]};var s=r("VU/8")(o,l,!1,function(t){r("q812")},"data-v-3f782d81",null);e.default=s.exports},"Q+a4":function(t,e,r){"use strict";e.a={data:function(){return{defaultAvatar:r("hKdl")}},methods:{filterAvatar:function(t){return t?t.replace(/^http(s)?/,"https"):this.defaultAvatar}}}},SldL:function(t,e){!function(e){"use strict";var r,a=Object.prototype,n=a.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",c="object"==typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{(u=e.regeneratorRuntime=c?t.exports:{}).wrap=_;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",m={},v={};v[o]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(E([])));y&&y!==a&&n.call(y,o)&&(v=y);var b=k.prototype=T.prototype=Object.create(v);x.prototype=b.constructor=k,k.constructor=x,k[s]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(b),t},u.awrap=function(t){return{__await:t}},L(F.prototype),F.prototype[l]=function(){return this},u.AsyncIterator=F,u.async=function(t,e,r,a){var n=new F(_(t,e,r,a));return u.isGeneratorFunction(e)?n:n.next().then(function(t){return t.done?t.value:n.next()})},L(b),b[s]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var a=e.pop();if(a in t)return r.value=a,r.done=!1,r}return r.done=!0,r}},u.values=E,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(a,n){return l.type="throw",l.arg=t,e.next=a,n&&(e.method="next",e.arg=r),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;S(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:E(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=r),m}}}function _(t,e,r,a){var n=e&&e.prototype instanceof T?e:T,i=Object.create(n.prototype),o=new O(a||[]);return i._invoke=function(t,e,r){var a=f;return function(n,i){if(a===h)throw new Error("Generator is already running");if(a===d){if("throw"===n)throw i;return j()}for(r.method=n,r.arg=i;;){var o=r.delegate;if(o){var l=C(o,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var s=w(t,e,r);if("normal"===s.type){if(a=r.done?d:p,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=d,r.method="throw",r.arg=s.arg)}}}(t,r,o),i}function w(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function T(){}function x(){}function k(){}function L(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function F(t){var e;this._invoke=function(r,a){function i(){return new Promise(function(e,i){!function e(r,a,i,o){var l=w(t[r],t,a);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,i,o)},function(t){e("throw",t,i,o)}):Promise.resolve(c).then(function(t){s.value=t,i(s)},o)}o(l.arg)}(r,a,e,i)})}return e=e?e.then(i,i):i()}}function C(t,e){var a=t.iterator[e.method];if(a===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,C(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=w(a,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},XqLc:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),i=r("exGp"),o=r.n(i),l=r("Dl6f"),s=r("0SQO"),c=r("0xDb"),u={name:"call-log",mixins:[r("Q+a4").a,s.a],data:function(){var t=this;return{formatDateTimeByType:c.d,dateTime:[Date.now()-2592e6,Date.now()],callStatusOption:[{value:"",label:"全部"},{value:1,label:"未接通"},{value:2,label:"接通"}],telTaskTypeOption:[{value:"",label:"全部"},{value:1,label:"不良评价回访"},{value:2,label:"ECM话务任务"}],listParams:{marketingType:"",sceneSettingId:"",phoneNumber:"",currentPage:1,pageSize:20,callStatus:"",telTaskType:"",memberId:"",storeId:"",referId:""},total:0,loading:!1,tableList:[],pickerOptions:{onPick:function(e){var r=e.maxDate,a=e.minDate;new Date(r).getTime()-new Date(a).getTime()>7776e6&&(t.$tips({type:"warning",message:"时间范围不能大于90天"}),t.$nextTick(function(e){t.dateTime=["",""]}))},disabledDate:function(t){return t.getTime()>Date.now()}}}},created:function(){this.$store.commit("aside_handler",!1),this.$store.commit("mutations_breadcrumb",[{name:"会员管理",path:""},{name:"通话记录",path:""}]),this.getTableList(),this.$store.commit("mutations_layoutTips",'<div class="layout--tips">\n          <i class="el-icon-info"></i>\n          通话录音默认存储3天，如需更长的期限，请在录音设置中开启。\n      </div>\n    ')},beforeDestroy:function(){this.$store.commit("mutations_layoutTips","")},methods:{getTableList:function(){var t=this;return o()(n.a.mark(function e(){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dateTime?(t.listParams.beginTime=Object(c.d)(t.dateTime[0],"yyyy-MM-dd"),t.listParams.endTime=Object(c.d)(t.dateTime[1],"yyyy-MM-dd")):(t.listParams.beginTime="",t.listParams.endTime=""),t.loading=!0,e.prev=2,e.next=5,Object(l.a)(t.listParams);case 5:0===(r=e.sent).errorCode&&(t.tableList=r.result.result||[],t.total=r.result.totalCount),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t.$tips({type:"error",message:"请求列表出错"});case 12:t.loading=!1;case 13:case"end":return e.stop()}},e,t,[[2,9]])}))()}}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"dm-wrap"},[r("div",{staticClass:"pb22 clearfix"},[r("el-date-picker",{staticClass:"w250",attrs:{"picker-options":t.pickerOptions,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.getTableList},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}}),t._v(" "),r("el-select",{staticClass:"dm-select",attrs:{clearable:"",placeholder:"选择通话状态"},on:{change:t.getTableList},model:{value:t.listParams.callStatus,callback:function(e){t.$set(t.listParams,"callStatus",e)},expression:"listParams.callStatus"}},t._l(t.callStatusOption,function(t,e){return r("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),r("el-select",{staticClass:"dm-select",attrs:{clearable:"",placeholder:"选择类型"},on:{change:t.getTableList},model:{value:t.listParams.telTaskType,callback:function(e){t.$set(t.listParams,"telTaskType",e)},expression:"listParams.telTaskType"}},t._l(t.telTaskTypeOption,function(t,e){return r("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),r("el-input",{staticClass:"w200",attrs:{placeholder:"输入号码查询",clearable:""},on:{change:t.refresh},model:{value:t.listParams.phoneNumber,callback:function(e){t.$set(t.listParams,"phoneNumber",e)},expression:"listParams.phoneNumber"}},[r("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/calllog/record")}}},[t._v("录音设置")])],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{tooltipEffect:"light",data:t.tableList}},[r("el-table-column",{attrs:{align:"left",width:"150",prop:"callBeginTime",label:"呼叫时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",{staticClass:"cell-time"},[t._v("\n          "+t._s(t.formatDateTimeByType(e.row.callBeginTime,"yyyy-MM-dd-HH-mm-ss",!0).y)),r("br"),t._v(" "),r("span",[t._v(t._s(t.formatDateTimeByType(e.row.callBeginTime,"yyyy-MM-dd-HH-mm-ss",!0).h))])])]}}])}),t._v(" "),r("el-table-column",{attrs:{align:"left","min-width":"150",prop:"clerkName",label:"主叫"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("img",{staticClass:"vertical-middle table__avatar--40",attrs:{src:e.row.clerkImage||t.defaultAvatar,width:"60",height:"60",alt:""}}),t._v(" "),r("div",{staticClass:"inline-block vertical-middle"},[r("p",{staticClass:"table-name--ellipsis"},[t._v(t._s(e.row.clerkName||"--"))]),t._v(" "),r("p",{staticClass:"fz13 gray"},[t._v(t._s(e.row.storeGroupName||"--"))])])]}}])}),t._v(" "),r("el-table-column",{attrs:{align:"left","min-width":"150",prop:"memberId",label:"被叫(会员)"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("img",{staticClass:"vertical-middle table__avatar--40",attrs:{src:t.filterAvatar(e.row.photoUrl),width:"60",height:"60",alt:""}}),t._v(" "),r("div",{staticClass:"inline-block vertical-middle"},[r("p",{staticClass:"table-name--ellipsis"},[t._v(t._s(e.row.name||"--"))]),t._v(" "),r("p",{staticClass:"fz13 gray"},[t._v(t._s(e.row.phoneNumber||"--"))])])]}}])}),t._v(" "),r("el-table-column",{attrs:{align:"left",width:"150",prop:"status",label:"通话状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1===e.row.callStatus?"未接通":2===e.row.callStatus?"接通":"成功")+"\n      ")]}}])}),t._v(" "),r("el-table-column",{attrs:{align:"left",width:"150",prop:"status",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1!==e.row.telTaskType?e.row.ecmName:"不良评价回访")+"\n      ")]}}])}),t._v(" "),r("el-table-column",{attrs:{align:"left",width:"150",prop:"callTime",label:"通话时长（秒）"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.callTime)+"秒\n      ")]}}])}),t._v(" "),r("el-table-column",{attrs:{align:"left",width:"150",prop:"callFee",label:"录音"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!==e.row.showStatus?r("span",[t._v(t._s(e.row.description))]):r("a",{attrs:{href:e.row.showRecordUrl,target:"_blank",title:e.row.description}},[r("i",{staticClass:"iconfont  icon-xinxixianshi2 pr5"}),t._v(t._s(e.row.description))])]}}])})],1),t._v(" "),r("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.tableList.length,expression:"tableList.length"}],staticClass:"dm-pagination",attrs:{background:"","current-page":t.listParams.currentPage,"page-sizes":[20,40,60,80],"page-size":t.listParams.pageSize,layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]},p=r("VU/8")(u,f,!1,null,null,null);e.default=p.exports},Xxa5:function(t,e,r){t.exports=r("jyFz")},exGp:function(t,e,r){"use strict";e.__esModule=!0;var a,n=r("//Fk"),i=(a=n)&&a.__esModule?a:{default:a};e.default=function(t){return function(){var e=t.apply(this,arguments);return new i.default(function(t,r){return function a(n,o){try{var l=e[n](o),s=l.value}catch(t){return void r(t)}if(!l.done)return i.default.resolve(s).then(function(t){a("next",t)},function(t){a("throw",t)});t(s)}("next")})}}},jyFz:function(t,e,r){var a=function(){return this}()||Function("return this")(),n=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,i=n&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,t.exports=r("SldL"),n)a.regeneratorRuntime=i;else try{delete a.regeneratorRuntime}catch(t){a.regeneratorRuntime=void 0}},q812:function(t,e){}});